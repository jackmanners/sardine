% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/withings-sleep.R
\name{reformat.withings_sleep}
\alias{reformat.withings_sleep}
\title{Reformat Withings Sleep Data for External Use}
\usage{
reformat.withings_sleep(x, type = c("ggir"), ...)
}
\arguments{
\item{x}{A \code{withings_sleep} object created by \code{\link{withings_sleep}}}

\item{type}{Character string specifying output format. Currently supported:
\describe{
\item{"ggir"}{GGIR-compatible CSV format with columns: id, timestamp (ISO8601), acc}
}}

\item{...}{Additional arguments (currently unused, reserved for future formats)}
}
\value{
A data frame in the requested format:
\describe{
\item{GGIR format}{
\itemize{
\item \code{id}: Sleep session identifier
\item \code{timestamp}: ISO8601 formatted timestamp (e.g., "2024-01-01T00:00:00Z")
\item \code{acc}: Acceleration proxy (uses \code{mvt_score} from epoch data if available)
}
}
}
}
\description{
Exports epoch-level sleep data from a \code{withings_sleep} object into formats
compatible with external analysis tools like GGIR.
}
\details{
\strong{GGIR Format Details:}

The GGIR package expects externally-derived epoch data in a specific CSV format.
This function converts Withings epoch data to meet those requirements:
\itemize{
\item Timestamps are converted from Unix timestamps to ISO8601 format in UTC
\item Movement score (\code{mvt_score}) is used as a proxy for acceleration
\item ID column is automatically detected (tries w_id, sleep_id, then id)
}

The resulting data can be used with GGIR's part 1 for sleep analysis and
Sleep Regularity Index (SRI) calculation.
}
\examples{
\dontrun{
# Create withings_sleep object
wsleep <- withings_sleep(summary, epoch)

# Export to GGIR format
ggir_data <- wsleep$reformat(type = "ggir")

# Save for use with GGIR
write.csv(ggir_data, "withings_for_ggir.csv", row.names = FALSE)

# Use with GGIR package
library(GGIR)
GGIR::g.part1(
  datadir = ".",
  outputdir = "output",
  f0 = 1, f1 = 1,
  overwrite = TRUE,
  externalsleepdata = "withings_for_ggir.csv"
)
}

}
\seealso{
\code{\link{withings_sleep}} for creating the sleep object
}
